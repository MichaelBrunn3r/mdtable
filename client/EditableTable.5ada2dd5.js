import{S as t,i as s,s as e,j as n,k as o,a as l,l as r,o as c,p as a,d as h,h as i,q as d,e as u,r as f,u as g,v as m,w as x,x as w,n as v}from"./client.7237b21f.js";function P(t,s,e){return Math.min(Math.max(t,s),e)}class I{constructor(t,s){this.rowIdx=t,this.columnIdx=s}}class p{constructor(t,s,e,n){this.startPos=new I(t,s),this.endPos=new I(e,n)}collapse(){return this.endPos.rowIdx=this.startPos.rowIdx,this.endPos.columnIdx=this.startPos.columnIdx,this}translate(t,s){return this.startPos.rowIdx+=t,this.startPos.columnIdx+=s,this.endPos.rowIdx+=t,this.endPos.columnIdx+=s,this}constrain(t,s,e,n){return this.startPos.rowIdx=P(this.startPos.rowIdx,t,e),this.startPos.columnIdx=P(this.startPos.columnIdx,s,n),this.endPos.rowIdx=P(this.endPos.rowIdx,t,e),this.endPos.columnIdx=P(this.endPos.columnIdx,s,n),this}setEndPos(t,s){return this.endPos=new I(t,s),this}contains(t,s){return!(t<this.startPos.rowIdx&&t<this.endPos.rowIdx)&&(!(t>this.startPos.rowIdx&&t>this.endPos.rowIdx)&&(!(s>this.startPos.columnIdx&&s>this.endPos.columnIdx)&&!(s<this.startPos.columnIdx&&s<this.endPos.columnIdx)))}atTopEdge(t,s){return this.contains(t,s)&&t===Math.min(this.startPos.rowIdx,this.endPos.rowIdx)}atBottomEdge(t,s){return this.contains(t,s)&&t===Math.max(this.startPos.rowIdx,this.endPos.rowIdx)}atLeftEdge(t,s){return this.contains(t,s)&&s===Math.min(this.startPos.columnIdx,this.endPos.columnIdx)}atRightEdge(t,s){return this.contains(t,s)&&s===Math.max(this.startPos.columnIdx,this.endPos.columnIdx)}}function E(t,s,e){const n=t.slice();return n[15]=s[e],n[17]=e,n}function y(t,s,e){const n=t.slice();return n[18]=s[e],n[20]=e,n}function T(t,s,e){const n=t.slice();return n[21]=s[e],n[20]=e,n}function L(t){let s,e,m,x,w,v=t[20]+1+"";function P(){return t[9](t[20])}return{c(){s=n("td"),e=o(v),m=l(),this.h()},l(t){s=r(t,"TD",{class:!0});var n=c(s);e=a(n,v),m=h(n),n.forEach(i),this.h()},h(){d(s,"class","aux-cell aux-cell-top svelte-vd9cvy")},m(t,n){u(t,s,n),f(s,e),f(s,m),x||(w=g(s,"mousedown",P),x=!0)},p(s,e){t=s},d(t){t&&i(s),x=!1,w()}}}function D(t){let s,e,l,h,w=t[18]+"";function v(){return t[11](t[17],t[20])}function P(){return t[12](t[17],t[20])}return{c(){s=n("td"),e=o(w),this.h()},l(t){s=r(t,"TD",{class:!0});var n=c(s);e=a(n,w),n.forEach(i),this.h()},h(){d(s,"class","cell svelte-vd9cvy"),m(s,"selection-top",t[0]?.atTopEdge(t[17],t[20])),m(s,"selection-bottom",t[0]?.atBottomEdge(t[17],t[20])),m(s,"selection-left",t[0]?.atLeftEdge(t[17],t[20])),m(s,"selection-right",t[0]?.atRightEdge(t[17],t[20]))},m(t,n){u(t,s,n),f(s,e),l||(h=[g(s,"mousedown",v),g(s,"mouseover",P)],l=!0)},p(e,n){t=e,1&n&&m(s,"selection-top",t[0]?.atTopEdge(t[17],t[20])),1&n&&m(s,"selection-bottom",t[0]?.atBottomEdge(t[17],t[20])),1&n&&m(s,"selection-left",t[0]?.atLeftEdge(t[17],t[20])),1&n&&m(s,"selection-right",t[0]?.atRightEdge(t[17],t[20]))},d(t){t&&i(s),l=!1,x(h)}}}function M(t){let s,e,m,x,v,P,I,p=t[17]+1+"";function E(){return t[10](t[17])}let T=t[15],L=[];for(let s=0;s<T.length;s+=1)L[s]=D(y(t,T,s));return{c(){s=n("tr"),e=n("td"),m=o(p),x=l();for(let t=0;t<L.length;t+=1)L[t].c();v=l(),this.h()},l(t){s=r(t,"TR",{class:!0});var n=c(s);e=r(n,"TD",{class:!0});var o=c(e);m=a(o,p),o.forEach(i),x=h(n);for(let t=0;t<L.length;t+=1)L[t].l(n);v=h(n),n.forEach(i),this.h()},h(){d(e,"class","aux-cell aux-cell-left svelte-vd9cvy"),d(s,"class","svelte-vd9cvy")},m(t,n){u(t,s,n),f(s,e),f(e,m),f(s,x);for(let t=0;t<L.length;t+=1)L[t].m(s,null);f(s,v),P||(I=g(e,"mousedown",E),P=!0)},p(e,n){if(t=e,15&n){let e;for(T=t[15],e=0;e<T.length;e+=1){const o=y(t,T,e);L[e]?L[e].p(o,n):(L[e]=D(o),L[e].c(),L[e].m(s,v))}for(;e<L.length;e+=1)L[e].d(1);L.length=T.length}},d(t){t&&i(s),w(L,t),P=!1,I()}}}function R(t){let s,e,o,a,m,P,I,p,y=t[1][0],D=[];for(let s=0;s<y.length;s+=1)D[s]=L(T(t,y,s));let R=t[1],A=[];for(let s=0;s<R.length;s+=1)A[s]=M(E(t,R,s));return{c(){s=n("div"),e=n("table"),o=n("tr"),a=n("td"),m=l();for(let t=0;t<D.length;t+=1)D[t].c();P=l();for(let t=0;t<A.length;t+=1)A[t].c();this.h()},l(t){s=r(t,"DIV",{class:!0});var n=c(s);e=r(n,"TABLE",{class:!0});var l=c(e);o=r(l,"TR",{class:!0});var d=c(o);a=r(d,"TD",{class:!0}),c(a).forEach(i),m=h(d);for(let t=0;t<D.length;t+=1)D[t].l(d);d.forEach(i),P=h(l);for(let t=0;t<A.length;t+=1)A[t].l(l);l.forEach(i),n.forEach(i),this.h()},h(){d(a,"class","aux-cell aux-cell-corner svelte-vd9cvy"),d(o,"class","aux-wrapper-top svelte-vd9cvy"),d(e,"class","svelte-vd9cvy"),d(s,"class","wrapper svelte-vd9cvy")},m(n,l){u(n,s,l),f(s,e),f(e,o),f(o,a),f(o,m);for(let t=0;t<D.length;t+=1)D[t].m(o,null);f(e,P);for(let t=0;t<A.length;t+=1)A[t].m(e,null);I||(p=[g(window,"keydown",t[7]),g(a,"click",t[8])],I=!0)},p(t,[s]){if(32&s){let e;for(y=t[1][0],e=0;e<y.length;e+=1){const n=T(t,y,e);D[e]?D[e].p(n,s):(D[e]=L(n),D[e].c(),D[e].m(o,null))}for(;e<D.length;e+=1)D[e].d(1);D.length=y.length}if(31&s){let n;for(R=t[1],n=0;n<R.length;n+=1){const o=E(t,R,n);A[n]?A[n].p(o,s):(A[n]=M(o),A[n].c(),A[n].m(e,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=R.length}},i:v,o:v,d(t){t&&i(s),w(D,t),w(A,t),I=!1,x(p)}}}function A(t,s,e){let n,o=!1,l=()=>{o=!1,document.removeEventListener("mouseup",l)},r=[["1","2","3","4","5"],["1","2","3","4","5"],["1","2","3","4","5"],["1","2","3","4","5"],["1","2","3","4","5"],["1","2","3","4","5"],["1","2","3","4","5"],["1","2","3","4","5"],["1","2","3","4","5"],["1","2","3","4","5"]];function c(t,s){e(0,n=new p(t,s,t,s)),o=!0,document.addEventListener("mouseup",l)}function a(t,s){o&&e(0,n=n.setEndPos(t,s))}function h(t){e(0,n=new p(t,0,t,r[0].length-1))}function i(t){e(0,n=new p(0,t,r.length-1,t))}function d(){e(0,n=new p(0,0,r.length-1,r[0].length-1))}return[n,r,c,a,h,i,d,function(t){const s=t.key;"ArrowUp"===s?e(0,n=n.collapse().translate(-1,0).constrain(0,0,r.length-1,r[0].length-1)):"ArrowDown"===s?e(0,n=n.collapse().translate(1,0).constrain(0,0,r.length-1,r[0].length-1)):"ArrowLeft"===s?e(0,n=n.collapse().translate(0,-1).constrain(0,0,r.length-1,r[0].length-1)):"ArrowRight"===s&&e(0,n=n.collapse().translate(0,1).constrain(0,0,r.length-1,r[0].length-1))},()=>d(),t=>i(t),t=>h(t),(t,s)=>c(t,s),(t,s)=>a(t,s)]}export default class extends t{constructor(t){super(),s(this,t,A,R,e,{})}}
